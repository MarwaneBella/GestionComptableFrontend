
<div >
    <form  [formGroup] ="formInfosBon" >
      <div class="card text-center mt-4">
          <div class="card-header" >
              card de Fournisseur
          </div>
          <div class="card-body mx-5">
              <div class="row">
                  <div class="col me-3">
                      <mat-form-field  appearance="outline" >
                          <mat-select  placeholder="Select Fournisseur" formControlName ="fournisseur" (ngModelChange)="setFornisseur()">
                              <mat-option *ngFor="let fournisseur of fournisseurs" [value]="fournisseur" >{{fournisseur.nom}}</mat-option>
                          </mat-select>
                      </mat-form-field>

                  </div>
                  <div class="col">
                      <mat-form-field  appearance="outline">
                        <mat-label>code Fournisseur</mat-label>
                        <input matInput formControlName ="id"  readonly>
                    </mat-form-field>
                  </div>
              </div>

              <div class="row">
                  <div class="col me-3">
                    <mat-form-field  appearance="outline">
                      <mat-label>Bon Numero</mat-label>
                      <input matInput value="Later" readonly>
                  </mat-form-field>
                  </div>
                  <div class="col ">
                    <mat-form-field  appearance="outline">
                      <mat-label>Numero Facture</mat-label>
                      <input matInput formControlName ="num_fac" >
                  </mat-form-field>
                  </div>
                  <div class="col">
                      <mat-form-field class="example-full-width" appearance="outline">
                          <mat-label>Date de bon</mat-label>
                          <input matInput [matDatepicker]="picker" formControlName ="date_ba">
                          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                          <mat-datepicker [dateClass]="dateClass" #picker></mat-datepicker>
                        </mat-form-field>

                  </div>
              </div>

          </div>
      </div>
    </form>
    <form [formGroup]="formLigneBon">
      <div class="card text-center mt-4">
        <div class="card-header" >
            card de produit
        </div>
        <div class="card-body mx-5">
          <div class="row">
            <div class="col ">
                <mat-form-field  appearance="outline" >
                    <mat-select  placeholder="Select produit" formControlName ="produit" (ngModelChange)="setProduit()">
                        <mat-option *ngFor="let produit of produits" [value]="produit" >{{produit.reference+" -- "+produit.designation }}</mat-option> 
                    </mat-select>
                </mat-form-field>
            </div>

            <div class="col">
                <mat-form-field  appearance="outline">
                    <mat-label>Quantite</mat-label>
                    <input  type="number" matInput formControlName ="quantite" (keyup)="calculateMontants()">
                </mat-form-field>

            </div>
            
            <div class="col">
              <mat-form-field  appearance="outline">
                  <mat-label>Montant HT</mat-label>
                  <input type="number" matInput formControlName ="montant_ht" readonly>
              </mat-form-field>
            </div>
          </div>

          <div class="row">
            <div class="col ">
                <mat-form-field  appearance="outline">
                    <mat-label>TVA (%)</mat-label>
                    <input type="number" matInput formControlName ="tva"  readonly>
                </mat-form-field>
            </div>
            <div class="col">
              <mat-form-field  appearance="outline">
                <mat-label>Prix Unitaire Hors Taxe</mat-label>
                <input type="number" matInput formControlName ="prix_unitaire" (keyup)="calculateMontants()">
              </mat-form-field>
            </div>

            <div class="col">
              <mat-form-field  appearance="outline">
                  <mat-label>Taux TVA</mat-label>
                  <input type="number" matInput formControlName ="taux_tva"  readonly>
              </mat-form-field>
            </div>
          </div>

          <div class="row">
            <div class="col ">
              
                
            </div>
            <div class="col">
              
            </div>

            <div class="col">
              <mat-form-field  appearance="outline">
                  <mat-label>Montant TTC</mat-label>
                  <input type="number" matInput formControlName ="montant_ttc"  readonly>
              </mat-form-field>
            </div>
          </div>

          <div>
            <button class="btn btn-warning" (click)="declareFormLigneBon()"><i class="fa fa-refresh" aria-hidden="true"></i> Réinitialiser</button>
            <button class="btn btn-success ms-3" (click)="addLigne()"><i class="fa fa-plus" aria-hidden="true"></i> Ajoute Ligne</button>
          </div>

        </div>
      </div>
    </form>

    <div class="card  mt-4">
      <div class="card-body ">

        <div class="example-container mat-elevation-z8 ">
          <table mat-table [dataSource]="dataSource" > 
          
            <!-- reference Column -->
            <ng-container matColumnDef="reference" >
              <th mat-header-cell *matHeaderCellDef class="ms-2"> Reference </th>
              <td mat-cell *matCellDef="let row"> {{row.produit.reference}}</td>
              <td mat-footer-cell *matFooterCellDef></td>
            </ng-container>
          
            <!-- designation Column -->
            <ng-container matColumnDef="designation" >
              <th mat-header-cell *matHeaderCellDef> Designation</th>
              <td mat-cell *matCellDef="let row"> {{row.produit.designation}}</td>
              <td mat-footer-cell *matFooterCellDef></td>
            </ng-container>
          
            <!-- prix_unitaire Column -->
            <ng-container matColumnDef="prix_unitaire">
              <th mat-header-cell *matHeaderCellDef> Prix_unitaire </th>
              <td mat-cell *matCellDef="let row"> {{row.prix_unitaire}} </td>
              <td mat-footer-cell *matFooterCellDef> Totale</td>
            </ng-container>
    
            <!-- quantite Column -->
            <ng-container matColumnDef="quantite">
              <th mat-header-cell *matHeaderCellDef> Quantite </th>
              <td mat-cell *matCellDef="let row"> {{row.quantite}}  </td>
              <td mat-footer-cell *matFooterCellDef> 10 </td>
            </ng-container>
    
            <!-- montant_HT Column -->
            <ng-container matColumnDef="montant_ht">
              <th mat-header-cell *matHeaderCellDef> Montant HT </th>
              <td mat-cell *matCellDef="let row"> {{row.montant_ht}}   </td>
              <td mat-footer-cell *matFooterCellDef> 500 </td>
            </ng-container>
    
            <!-- taux_TVA Column -->
            <ng-container matColumnDef="taux_tva">
              <th mat-header-cell *matHeaderCellDef> Taux TVA </th>
              <td mat-cell *matCellDef="let row"> {{row.taux_tva}}  </td>
              <td mat-footer-cell *matFooterCellDef> 50 </td>
            </ng-container>
    
            <!-- Symbol Column -->
            <ng-container matColumnDef="montant_ttc">
              <th mat-header-cell *matHeaderCellDef> Montant TTC </th>
              <td mat-cell *matCellDef="let row"> {{row.montant_ttc}}  </td>
              <td mat-footer-cell *matFooterCellDef> 550</td>
            </ng-container>
            <ng-container matColumnDef="actions">
              <th mat-header-cell *matHeaderCellDef> Actions </th>
              <td mat-cell *matCellDef="let row">
                  <button  aria-label="Name"  type="button" class="btn btn-outline-success me-1"><i class="fa fa-pencil" aria-hidden="true"></i></button>
                  <button  class="btn btn-outline-danger"><i class="fa fa-trash" aria-hidden="true"></i></button>
              </td>
              <td mat-footer-cell *matFooterCellDef></td>
            </ng-container>
    
          
            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            <tr mat-footer-row *matFooterRowDef="displayedColumns; sticky: true"></tr>
    
            
          </table>
        </div>
    
        <div class="text-center mt-3">
          <button class="btn btn-primary"><i class="fa fa-floppy-o" aria-hidden="true"></i> Enregistrer</button>
          <button class="btn btn-success ms-3"><i class="fa fa-check" aria-hidden="true"></i> Valider</button>
        </div>

      </div>
    </div>
    
</div>


<!--


<div mat-dialog-content>


<div class=" bg-white" >
    <form [formGroup]="clientForm" >
      <div class="row">
        <div class="col-4 " >
          <div class="d-flex align-items-center flex-column mt-3 ">
                
            <img [src]="imageUrl" class="img-fluid">


            <div class="mt-3">

                <mat-form-field  appearance="outline" >
                    <mat-label>Code client</mat-label>
                    <input matInput   value="C-000{{id}}" readonly>
                </mat-form-field>

                <mat-form-field  appearance="outline">
                    <mat-label>Nom / Raison Sociale</mat-label>
                    <input matInput  formControlName="nom" readonly>
                </mat-form-field>

            </div>
          </div>
    
        
        </div>
        <div class="col-8">
          <div class="card text-center" >
            <div class="card-header">
                Les Informations generale
            </div>
            <div class="card-body card-prix">
                
                <div class="row ">
                    <div class="col">
                        <mat-form-field appearance="outline">
                            <mat-label>Site Web</mat-label>
                            <input matInput   formControlName="site_web" readonly>
                          </mat-form-field>
                    </div>
                    <div class="col">
                    <mat-form-field  appearance="outline">
                        <mat-label>ICE</mat-label>
                        <input matInput  formControlName="ice" readonly>
                      </mat-form-field>
                    </div>
                </div>

              <div class="row">
                <div class="col-6">

                    <mat-form-field  appearance="outline">
                        <mat-label>IF</mat-label>
                        <input matInput  formControlName="ifi" readonly>
                    </mat-form-field>

                    <mat-form-field  appearance="outline">
                        <mat-label>CNSS</mat-label>
                        <input matInput  formControlName="cnss" readonly>
                    </mat-form-field>
                      
                </div>
                <div class="col-6">
                    <mat-form-field  appearance="outline">
                        <mat-label>TP</mat-label>
                        <input matInput  formControlName="tp" readonly>
                    </mat-form-field>

                    
                      <mat-form-field  appearance="outline">
                        <mat-label>RC</mat-label>
                        <input matInput  formControlName="rc" readonly>
                      </mat-form-field>
                  
                </div>
              </div>
            </div>
            
          </div>
        </div>
      </div>
      
        <div class="card text-center mt-4">
          <div class="card-header" >
            Adresse 
          </div>
          <div class="card-body" >
            <div class="row">
              <div class="col-4">
                <mat-form-field appearance="outline" >
                    <mat-label>Ville</mat-label>
                    <input matInput   formControlName="ville" readonly>
                  </mat-form-field>
              </div>
              <div class="col-4">
                <mat-form-field appearance="outline" >
                    <mat-label>Adresse</mat-label>
                    <input matInput   formControlName="adresse" readonly>
                  </mat-form-field>
              </div>
              <div class="col-4">
                <mat-form-field appearance="outline" >
                    <mat-label>Code Postale</mat-label>
                    <input matInput type="text"  formControlName="code_postale" readonly>
                  </mat-form-field>
              </div>
            </div>
            
          </div>
          
        </div>
        <div class="card text-center mt-4">
            <div class="card-header" >
                Contacts 
            </div>
            <div class="card-body" >
              <div class="row">
                <div class="col-4">
                    <mat-form-field appearance="outline" >
                        <mat-label>Email</mat-label>
                        <input matInput type="email"  formControlName="email" readonly>
                    </mat-form-field>
                </div>

                <div class="col-4">
                    <mat-form-field appearance="outline" >
                        <mat-label class="label-phone">Telephone Portable</mat-label>
                        <span matPrefix>+212 &nbsp;</span>
                        <input matInput type="tel" class="input-phone"  formControlName="tele_portable" readonly>
                    </mat-form-field>
                </div>

                <div class="col-4">
                    <mat-form-field appearance="outline" >
                        <mat-label class="label-phone" >Telephone Fix</mat-label>
                        <span matPrefix>+212 &nbsp;</span>
                        <input matInput type="tel" class="input-phone"  formControlName="tele_fix" readonly>
                        
                    </mat-form-field>
                </div>
              </div>
              
            </div>
            
          </div>
          <div class="card text-center mt-4">
            <div class="card-header" >
                les honoraires 
            </div>
            <div class="card-body" >
              <div class="row">
                <div class="col">
                    <mat-form-field appearance="outline" >
                        <mat-label>Bilan</mat-label>
                        <input matInput type="number"  formControlName="bilan" readonly>
                        <span matSuffix >DH</span>
                      </mat-form-field>
                </div>

                <div class="col">
                    <mat-form-field appearance="outline" >
                        <mat-label>PV Bilan</mat-label>
                        <input matInput type="number"  formControlName="pv_bilan" readonly>
                        <span matSuffix >DH</span>
                      </mat-form-field>
                </div>

                
              </div>

              <div class="row">
                <div class="col">
                    <mat-form-field appearance="outline" >
                        <mat-label>Régime</mat-label>
                        <input matInput type="text"  formControlName="regime" readonly>
                    </mat-form-field>
                </div>

                <div class="col">
                    <mat-form-field appearance="outline" >
                        <mat-label>Tva</mat-label>
                        <input matInput type="number"  formControlName="r_tva" readonly>
                        <span matSuffix >DH</span>
                      </mat-form-field>
                </div>

                <div class="col">
                    <mat-form-field appearance="outline" >
                        <mat-label>Cnss</mat-label>
                        <input matInput type="number"  formControlName="r_cnss" readonly>
                        <span matSuffix >DH</span>
                      </mat-form-field>
                </div>

              </div>
              
            </div>
            
          </div>
  
    </form>

    
    </div>

  </div>
-->